%main.container.mb-res-50
  %h1.general-title-margin Checkout
  = render 'progress'
  %h3.general-subtitle Credit Card
  =form_for @order, url: checkout_submit_payment_path,
    class: 'max-600 mb-80' do |f|
    = f.fields_for :card, @order.card do |fields|
      .form-group{ class: ('has-error' if @order.card.errors[:number].any?)}
        %label.control-label.font-weight-light{for: "number"} Card Number
        = fields.text_field :number, class: 'form-control',
          data: {mask: "9999-9999-9999-9999", placeholder: "X"},
          placeholder: "Card Number"
        %span.help-block= @order.card.errors[:number].first
      .row
        .col-sm-6
          .form-group{ class: ('has-error' if @order.card.errors[:cardholder].any?)}
            %label.control-label.font-weight-light{for: "cardholder"} Name on Card
            = fields.text_field :cardholder, class: 'form-control',
              placeholder: "Name on Card"
            %span.help-block= @order.card.errors[:cardholder].first
        .col-sm-3
          .form-group{ class: ('has-error' if @order.card.errors[:month_year].any?)}
            %label.control-label.font-weight-light{for: "month_year"} MM / YY
            = fields.text_field :month_year, class: 'form-control',
              placeholder: "MM / YY"
            %span.help-block= @order.card.errors[:month_year].first
        .col-sm-3
          .form-group.relative{ class: ('has-error' if @order.card.errors[:cvv].any?)}
            %label.control-label.font-weight-light{for: "cvv"} CVV
            = fields.password_field :cvv, class: 'form-control', placeholder: "CVV"
            %i.fa.fa-question-circle.general-form-help.font-18{ title: CheckoutHelper::CVV_HINT,
              data: {toggle: 'tooltip', placement: 'top'}}
            %span.help-block= @order.card.errors[:cvv].first
    .general-text-align
      %p.in-gold-500.font-18 Order Summary
      %table.general-summary-table
        = render '/orders/delivery_totals'
    = f.submit 'Save and continue', class: "btn btn-default center-block mb-20"
