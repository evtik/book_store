= f.fields_for type, address do |fields|
  = fields.hidden_field :id
  = fields.hidden_field :address_type
  - %i(first_name last_name street_address city zip).each do |property|
    .form-group{ class: ('has-error' if address.errors[property].any?)}
      = fields.label property, property.to_s.humanize, class: "control-label font-weight-light"
      = fields.text_field property, class: "form-control", placeholder: property.to_s.humanize
      %span.help-block= address.errors[property].first
  .form-group{ class: ('has-error' if address.errors[:country].any?)}
    = fields.label :country, 'Country', class: "control-label font-weight-light"
    %select{class: 'form-control country-select',
      name: "#{entity}[#{type}][country]", 'data-target': "#{type}-phone"}
      %option{value: "", hidden: true, selected: true} Select a country 
      - @countries.each do |country|
        %option{value: country.first, class: "#{type}",
          selected: country.first == address.country,
          'data-country-code': country.last}= country.first
    %span.help-block= address.errors[:country].first
  .form-group{ class: ('has-error' if address.errors[:phone].any?)}
    = fields.label :phone, 'Phone', class: "control-label font-weight-light"
    = fields.phone_field :phone, class: "form-control",
      id: "#{type}-phone", placeholder: "Example +123456789101112"
    %span.help-block= address.errors[:phone].first
